---
title: "Reorganizng Code & Conducting Data Analysis"
author: "Alexandra Gonzalez"
date: "1/16/2018"
output: html_document
---

```{r library_download, include=FALSE}
library(rredlist)
library("profvis") 
library("rredlist")
token <- "cf51b7524f618f5b23220e687b70c01d0d240cc82d179cf2c5b08b70fdfb83d4" 
```

### Purpose Overview 

IUCN data was updated in Sept. 2017. I have deleted my environment in r (no saved variables) because the data is no longer the most recent. As I download the data again to my local environment to export to ArcGis, I am reorganzing the functions, adding documentation where needed and adding values that I did not previously have. 

### In the Process 
As I run through the code, this is what I am completing: 

1. Reorganizing functions: previously, functions were messy and lacked documentation

2. Most recent data: Data was from early 2017. Since then, there has been new data added. Updating all variables to ensure the maps I create have most accurate data 

3. Adding region identifiers where applicable. Previously, there was no geographic region associated with the threat. However, there are at least 12 regional identifiers that I can write code to capture. 

4. Clean data before performing join within ArcGis. The list of species where spatial data is available is different from the list of data where taxonomy is available

5. Organize data in table so that I can plot in chloropleth form (viewing simplicity) Need to ask further about this. 

6. Setting up tables for data analysis (See below)


Below is an example of a function that needs more documentation: 
```{r species_length, include=TRUE}
species_length <- function (species_list){
  # Runs through a list of species and only pulls the failures 
  fail_list <- vector(length = length(species_list), mode = "character")
  amphibian_list <- vector(length = length(species_list), mode = "character")
  i <- 1
  for (species in species_list){
    if (length(species) > 2){
      fail_list[i] <- species
    } else  { 
      amphibian_list[i] <- species 
    }
    i <- i + 1 
  }
  amph.fail <- data.frame(amphibian_list, fail_list)
  return(amph.fail)
}
```

### (1) Threat Maps, (2) Data Acquisition & Reorganization and (3) Intitial Data Analysis (Due Date Feb 9)

Ideally, submit all three materials to Dr. D. Work on recommendations over the next two weeks and have 80% of final analysis/mapping due by late feb/early march. 

### Accomplished 

Spatial join in r - yay! 

1. I was able to export the 'threat table' I had created with code earlier this year and create a join within ArcGis. My prelimary map (of only 5 species) was proof of concept and allows me to move on to larger datasets. 

2. From my understanding, this will be the *first* time IUCN threats have been mapped on a larger scale. 

3. Prelimanary maps (See attached) on Threat Code. 










